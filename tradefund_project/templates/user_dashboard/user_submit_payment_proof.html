{% extends "user_dashboard/base_user_dashboard.html" %}

{% load i18n %}
{% load static %}

{% block title %}{{ page_title }}{% endblock %}

{% block user_dashboard_content %}
<div class="bg-white shadow-md rounded-lg p-6">
    <h2 class="text-2xl font-semibold text-gray-800 mb-4">Investment Payment: {{ tier_name }}</h2>

    {% if messages %}
        {% for message in messages %}
            <div class="mb-4 p-3 rounded-md 
                        {% if message.tags == 'success' %}bg-green-100 text-green-700{% endif %}
                        {% if message.tags == 'error' %}bg-red-100 text-red-700{% endif %}
                        {% if message.tags == 'info' %}bg-blue-100 text-blue-700{% endif %}
                        {% if message.tags == 'warning' %}bg-yellow-100 text-yellow-700{% endif %}"
                 role="alert">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}

    <div class="mb-6">
        <h3 class="text-xl font-medium text-gray-700 mb-3">Step 1: Make Your Payment</h3>
        <div class="space-y-2 text-gray-600 bg-gray-50 p-4 rounded-md">
            <p><strong>Tier:</strong> {{ tier_name }}</p>
            <p><strong>Amount Due:</strong> <span class="font-semibold text-primary">{{ payment_instructions.amount_due }}</span></p>
            <p class="mt-2">Please make a payment to the following account:</p>
            <ul class="list-disc list-inside pl-4 mt-1">
                <li><strong>Bank Name:</strong> {{ payment_instructions.bank_name }}</li>
                <li><strong>Account Name:</strong> {{ payment_instructions.account_name }}</li>
                <li><strong>Account Number:</strong> {{ payment_instructions.account_number }}</li>
                <li><strong>SWIFT/BIC Code:</strong> {{ payment_instructions.swift_code }}</li>
            </ul>
            <p class="mt-3">
                <strong><i class="fas fa-exclamation-triangle text-red-500 mr-1"></i>Important Payment Reference:</strong> 
                <span class="font-mono bg-gray-200 px-2 py-1 rounded text-red-700">{{ payment_instructions.reference }}</span>
            </p>
            <p class="mt-1 text-sm text-red-600">You <strong class="font-semibold">MUST</strong> use this exact reference so we can identify and process your payment correctly.</p>
        </div>
    </div>

    <div class="mb-6">
        <h3 class="text-xl font-medium text-gray-700 mb-3">Step 2: Email Your Proof of Payment</h3>
        <div class="bg-blue-50 p-4 rounded-md text-blue-700">
            <p>After completing the payment, please send a clear screenshot or PDF of your transaction receipt to:</p>
            <p class="font-semibold text-lg my-2">
                <a href="mailto:{{ proof_submission_email }}?subject=Payment Proof - {{ payment_instructions.reference }}" class="hover:underline">{{ proof_submission_email }}</a>
            </p>
            <p>Please include your <strong>Payment Reference ({{ payment_instructions.reference }})</strong> in the subject line or body of your email.</p>
        </div>
    </div>

    <div class="mt-6 text-sm text-gray-600">
        <p>Once we receive and verify your emailed proof of payment, our team will activate your investment. This typically takes 1-2 business days. You will be notified, and the investment will appear in your <a href="{% url 'user_dashboard:transactions' %}" class="text-secondary hover:underline">Transaction History</a> once processed.</p>
        <p class="mt-2">If you have any questions, please contact support.</p>
    </div>

    <div class="mt-8">
        <a href="{% url 'user_dashboard:home' %}" class="text-secondary hover:underline">&larr; Back to Dashboard</a>
    </div>
</div>
{% endblock %}
